# ===== Dynamic Template Watcher (자동 템플릿 동기화) =====
# 템플릿 폴더 변경 시 DB에 자동 반영하려면 true로 설정
DYNAMIC_TEMPLATE_WATCH=false
# ===== MCP API 인증 =====
# 관리자(마스터) 키: ADMIN_API_KEY 사용 (옛 API_KEY 지원은 곧 제거 예정)
ADMIN_API_KEY=your-secure-admin-key-here
# 사용자 키는 DB에서 발급되며, 호출 시 헤더에 사용: X-API-Key: <user_api_key>
# ===== Azure / Microsoft Graph =====
APP_PREFIX=mcp-todo-server
SCOPES=Tasks.ReadWrite
GRAPH_BASE_URL=https://graph.microsoft.com/v1.0

# ===== Server =====
EXECUTOR_MODE=rest
PORT=8082
TZ=Asia/Seoul
LOG_LEVEL=INFO
SERVER_NAME=MCP ToDo Server
SERVER_VERSION=0.2.0
MCP_PROTOCOL_REV=2025-06-18
SSE_ENABLED=true
ALLOW_ORIGINS=
USER_TEMPLATE_DEFAULT=lite
SENTRY_DSN=
DB_URL=sqlite:///./secrets/app.db
DB_ECHO=false
DB_AUTO_CREATE=false

# ===== Paths (relative) =====
HOST_SECRETS=./secrets
HOST_HELPER=./auth-helper
TOOL_SCHEMA_DIR=

# ===== Container internal paths =====
SERVER_CTR_SECRETS=/app/secrets
TOOL_CTR_SECRETS=/opt/secrets
TOOL_CTR_HELPER=/opt/auth-helper
PYTHON_VENDOR=/opt/auth-helper/vendor

# ===== Permissions =====
USER_ID=1000
GROUP_ID=1000

# ===== Tool container =====
TOOL_CONTAINER=auth-tool
TOOL_IMAGE=mcr.microsoft.com/azure-cli:latest

# ===== MCP server =====
MCP_CONTAINER=mcp-server
MCP_IMAGE=yamon/mcp-server:latest
MCP_TOKEN_FILE=${SERVER_CTR_SECRETS}/token.json

# ===== Policy (Casbin) =====
# 기본: 파일 기반 정책 (샘플)
CASBIN_MODEL=./policy/model.conf
CASBIN_POLICY=./policy/policy.csv
# DB 기반 정책을 사용하려면:
# - 위 CASBIN_POLICY 대신 CASBIN_STORE=db 또는 CASBIN_DB=true 설정
# - 테이블: casbin_rule(ptype, v0..v5)
#CASBIN_STORE=db
#CASBIN_DB=true

# ===== Tenant/Subscription for login automation (fill if needed) =====
# If you set the correct tenant ID from error logs here, you avoid being redirected to a wrong tenant that triggers MFA.
# Default subscription ID (optional). If set, enables non-interactive mode.
TENANT_ID=
AZ_SUBSCRIPTION_ID=

# ===== HTTP / Rate limiting / Circuit breaker =====
HTTP_TIMEOUT=30
RATE_PER_SEC=5
RATE_BURST=5
CB_FAILS=3
CB_COOLDOWN_SEC=5

# ===== Auth refresh (helper) =====
REFRESH_INTERVAL=60
REFRESH_SLACK=600

# ===== Traefik (reverse proxy) =====
MCP_DOMAIN=todo.yamon.io
TRAEFIK_NETWORK=traefik_Net
TRAEFIK_ENTRYPOINTS=websecure
ACME_RESOLVER=acmeresolver
ROUTER_NAME=mcp
SERVICE_NAME=mcp
